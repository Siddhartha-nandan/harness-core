{{- if .Values.dockercfg}}
apiVersion: v1
kind: Secret
metadata:
  name: {{ include "iacm-manager.name" . }}-dockercfg
  labels:
    {{- include "iacm-manager.labels" . | nindent 4 }}
    {{- include "harnesscommon.tplvalues.render" ( dict "value" .Values.global.commonLabels "context" $ ) | nindent 4 }}
  annotations:
    harness.io/skip-versioning: "true"
data:
  .dockercfg: {{.Values.dockercfg}}
type: kubernetes.io/dockercfg
{{- end}}
