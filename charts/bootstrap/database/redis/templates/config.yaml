apiVersion: v1
kind: ConfigMap
metadata:
  name: redis-harness-configmap
  namespace: {{ .Release.Namespace }}
  labels:
    app: redis
    {{- include "redis.labels" . | nindent 4 }}
data:
  redis.conf: |
    dir "/data"
    port 6379
    active-defrag-cycle-max 25
    active-defrag-ignore-bytes 1mb
    activedefrag yes
    maxmemory 0
    maxmemory-policy volatile-lru
    rdbchecksum yes
    rdbcompression yes
    save 60 1
    maxclients 30000
    timeout 10
